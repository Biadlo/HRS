# 测试文档 - 用户相关

[TOC]

## 1. 单元测试

### 1.1 用户界面层单元测试

#### 1.1.1 页面显示与跳转测试
```
   - 酒店列表界面
      - 酒店详情界面
         - 生成订单模态框
   - 个人中心界面
      - 我的信息选项卡
         - 修改个人信息模态框
      - 我的订单选项卡
         - 查看订单详情模态框
         - 撤销订单确认框
         - 订单评价模态框
      - 信用记录选项卡

   测试结果：通过
```
#### 1.1.2 功能测试

##### 1.1.2.1 向业务层请求查看查看酒店列表

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|完成登录|无|浏览器向服务器发起 /hotel POST请求|通过|

##### 1.1.2.2 查看酒店详情

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击酒店选项卡|无|浏览器向服务器发起 /detail POST请求|通过|

##### 1.1.2.3 预定酒店房间

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|提交订单|订单信息|浏览器向服务器发起 /addOrder POST请求|通过|

##### 1.1.2.4 查看个人信息

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|选择个人信息菜单|无|浏览器向服务器发起 /getUserInfo GET请求|通过|

##### 1.1.2.5 修改个人信息

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|提交个人信息|个人信息|浏览器向服务器发起 /userInfo/update POST请求|通过|

##### 1.1.2.6 查看订单记录

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|选择查看订单选项卡|无|浏览器向服务器发起 /getUserOrders GET请求|通过|

##### 1.1.2.7 查看订单详情

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|选择查看详情按钮|订单id|显示对应订单详情模态框|通过|

##### 1.1.2.8 撤销未执行订单

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|选择撤销订单按钮|订单id|浏览器向服务器发起 /annulOrder GET请求|通过|

##### 1.1.2.9 评价订单酒店

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|选择评价酒店按钮|订单id、评分|浏览器向服务器发起 /changeHotelRate POST请求|通过|

### 1.2 业务逻辑层单元测试

#### 1.2.1 功能测试

##### 1.2.1.1 向数据层请求添加订单
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /api/hotel/addOrder 请求|OrderVO|向数据层请求储存订单信息|通过|

##### 1.2.1.2 向数据层请求更改用户信息
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /api/hotel/{id}/userInfo/update 请求|UserInfoVO，id|向数据层请求更改用户信息|通过|

##### 1.2.1.3 向数据层请求撤销订单
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /api/hotel/{orderid}/annulOrder 请求|orderid|向数据层请求撤销订单，并更改相关信息|通过|

##### 1.2.1.4 向数据层请求获取本用户的所有订单
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /api/hotel/{userid}/getUserOrders 请求|userid|向数据层请求获取本用户的所有订单，并返回|通过|

##### 1.2.1.5 向数据层请求获取酒店列表
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /api/hotel/all 请求|无|向数据层请求获取酒店列表，并返回|通过|

##### 1.2.1.6 向数据层请求获取信用记录列表
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /api/hotel/{id}/getCreditRecord 请求|id|向数据层请求获取信用记录列表，并返回|通过|

##### 1.2.1.7 向数据层请求获取指定酒店细节
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /api/hotel/{hotelId}/detail 请求|id|向数据层请求获取指定酒店细节，并返回|通过|

##### 1.2.1.8 向数据层发送酒店评价
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /api/hotel/changeHotelRate 请求|id|向数据层发送酒店评价，并返回|通过|

### 1.3 数据层单元测试

#### 1.3.1 功能测试

##### 1.3.1.1 存储从业务层获取的订单信息

| 触发条件           | 参数  | 预期结果                  | 测试结果 |
| ------------------ | ----- | ------------------------- | -------- |
| 收到 addOrder 请求 | Order | 存储订单信息至orderList表 | 通过     |

##### 1.3.1.2 存储从业务层获取的撤销订单记录

| 触发条件             | 参数    | 预期结果                        | 测试结果 |
| -------------------- | ------- | ------------------------------- | -------- |
| 收到 annulOrder 请求 | orderid | 存储撤销订单的信息至orderList表 | 通过     |

##### 1.3.1.3 向业务层发送指定用户的订单信息

| 触发条件                | 参数   | 预期结果                             | 测试结果 |
| ----------------------- | ------ | ------------------------------------ | -------- |
| 收到 getUserOrders 请求 | userid | 返回数据库中指定用户的订单信息的列表 | 通过     |

##### 1.3.1.4 向业务层发送某一订单信息

| 触发条件               | 参数    | 预期结果                   | 测试结果 |
| ---------------------- | ------- | -------------------------- | -------- |
| 收到 getOrderById 请求 | orderid | 返回数据库中指定订单的信息 | 通过     |

##### 1.3.1.5 向业务层返回所有酒店信息列表

| 触发条件                 | 参数 | 预期结果                       | 测试结果 |
| ------------------------ | ---- | ------------------------------ | -------- |
| 收到 selectAllHotel 请求 | 无   | 返回数据库中所有酒店的信息列表 | 通过     |

##### 1.3.1.6 向业务层返回某一酒店的细节

| 触发条件             | 参数 | 预期结果                   | 测试结果 |
| -------------------- | ---- | -------------------------- | -------- |
| 收到 selectById 请求 | id   | 返回数据库中指定酒店的信息 | 通过     |

##### 1.3.1.7 更新某一酒店的评价

| 触发条件                  | 参数         | 预期结果               | 测试结果 |
| ------------------------- | ------------ | ---------------------- | -------- |
| 收到 changeHotelRate 请求 | hotelId,rate | 存储某一酒店的评价信息 | 通过     |

##### 1.3.1.8 向业务层返回指定用户的信息

| 触发条件                 | 参数 | 预期结果                   | 测试结果 |
| ------------------------ | ---- | -------------------------- | -------- |
| 收到 getAccountById 请求 | id   | 返回数据库中指定订单的信息 | 通过     |

##### 1.3.1.9 存储从业务层获取的用户更新的信息

| 触发条件                | 参数                             | 预期结果               | 测试结果 |
| ----------------------- | -------------------------------- | ---------------------- | -------- |
| 收到 updateAccount 请求 | id,password,username,phoneNumber | 存储用户更新的个人信息 | 通过     |

## 2. 集成测试

### 2.1 功能测试

#### 2.1.1 查看酒店列表
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|访问酒店列表页面|无|显示酒店列表|通过|

#### 2.1.2 查看酒店详情
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击酒店卡片|无|显示酒店详情|通过|

#### 2.1.3 预定酒店房间
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击预订按钮并填写订单信息|订单信息|添加订单信息到系统中|通过|

#### 2.1.4 查看个人信息
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|访问个人信息页面|无|显示个人信息|通过|

#### 2.1.5 修改个人信息
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击修改按钮并填写个人信息|个人信息|更新个人信息|通过|

#### 2.1.6 查看订单记录
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|访问订单记录页面|无|显示订单记录列表|通过|

#### 2.1.7 查看订单详情
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击订单详情按钮|订单id|显示对应订单详情|通过|

#### 2.1.8 撤销未执行订单
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击撤销订单按钮并确认|订单id|对应订单状态置为已撤销|通过|

#### 2.1.9 评价订单酒店
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击评价订单按钮并填写评分|评分|更新酒店评分|通过|

