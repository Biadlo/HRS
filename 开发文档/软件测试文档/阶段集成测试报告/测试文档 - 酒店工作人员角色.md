# 测试文档 - 酒店工作人员相关

[TOC]

## 1. 单元测试

### 1.1 用户界面层单元测试

#### 1.1.1 页面显示与跳转测试
```
   - 酒店列表界面
      - 酒店详情界面
         - 生成订单模态框
   - 个人中心界面
      - 网站管理选项卡
         - 修改酒店信息模态框
      - 酒店订单管理选项卡
      - 优惠策略管理选项卡
         - 添加优惠策略模态框
      - 录入客房选项卡
         - 录入房间模态框

   测试结果：通过
```
#### 1.1.2 功能测试

##### 1.1.2.1 向业务层请求查看负责酒店信息

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|完成登录，点击酒店信息管理选项卡|staffId|浏览器向服务器发起 /detail get请求|通过|

##### 1.1.2.2 修改酒店信息

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击修改酒店信息按钮|无|浏览器向服务器发起 /hotelInfo/update POST请求|通过|

##### 1.1.2.3 入住酒店

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|用户入住酒店且工作人员选择相应订单入住按钮|订单信息|浏览器向服务器发起 /checkIn POST请求|通过|

##### 1.1.2.4 退房酒店

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|用户退房且工作人员选择相应订单退房按钮|订单信息|浏览器向服务器发起 /checkOut POST请求|通过|

##### 1.1.2.5 延迟入住

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|用户延迟入住且工作人员选择相应订单延迟入住按钮|订单信息|浏览器向服务器发起 /recheck POST请求|通过|

##### 1.1.2.6 订单逾期

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|该订单逾期且用户未入住，工作人员点击逾期按钮|订单信息|浏览器向服务器发起 /overdue POST请求|通过|

##### 1.1.2.7 查看订单

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|选择订单管理选项卡|hotelId|浏览器向服务器发起 /getHotelOrdersByStaffId GET请求|通过|

##### 1.1.2.8 查看优惠策略

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|选择优惠策略管理选项卡|hotelId|浏览器向服务器发起 /hotelAllCoupons GET请求 |通过|

##### 1.1.2.9 添加优惠策略

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|选择添加优惠按钮|hotelId|浏览器向服务器发起 /hotelTargetMoney或者/hotelTime POST请求|通过|

##### 1.1.2.10 录入客房

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|选择录入客房按钮|hotelId|浏览器向服务器发起 /roomInfo POST请求|通过|

### 1.2 业务逻辑层单元测试

#### 1.2.1 功能测试

##### 1.2.1.1 向数据层请求获得酒店信息
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /api/hotel/{hotelId}/detail 请求|hotelId|向数据层请求酒店详细信息|通过|

##### 1.2.1.2 向数据层请求将正常订单状态设置为已入住
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /{orderId}/checkIn 请求|orderid|向数据层请求将订单状态设置为已入住|通过|

##### 1.2.1.3 向数据层请求更新酒店信息
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /{id}/hotelInfo/update 请求|HotelInfoVO，id|向数据层请求更新酒店信息|通过|

##### 1.2.1.4 向数据层请求将订单状态设置为逾期（异常）
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /{orderId}/overdue 请求|orderid|向数据层请求将订单状态设置为异常|通过|

##### 1.2.1.5 向数据层请求将订单状态设置为已完成（待评价）
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /{orderId}/checkOut 请求|orderid|向数据层请求将订单状态设置为已完成（待评价）|通过|

##### 1.2.1.6 向数据层请求将异常订单状态设置为已入住
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /{orderId}/recheck 请求|orderid|向数据层请求将订单状态设置为已入住|通过|

##### 1.2.1.7 向数据层请求获取酒店订单
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /{userId}/getHotelOrdersByStaffId 请求|id|向数据层请求获取指定酒店订单信息，并返回|通过|

##### 1.2.1.8 向数据层请求查看指定酒店优惠策略
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /hotelAllCoupons 请求|hotelid|获得酒店优惠策略，并返回|通过|

##### 1.2.1.9 向数据层请求添加优惠策略
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /hotelTargetMoney或者/hotelTime 请求|CouponVO|向指定酒店添加优惠策略|通过|

##### 1.2.1.10 向数据层请求录入房间
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /roomInfo 请求|HotelRoomVO|给指定酒店录入房间|通过|


### 1.3 数据层单元测试

#### 1.3.1 功能测试

##### 1.3.1.1 向业务层发送指定酒店的信息

| 触发条件           | 参数  | 预期结果                  | 测试结果 |
| ------------------ | ----- | ------------------------- | -------- |
| 收到 retrieveHotelDetails 请求 | hotelId | 返回指定酒店信息列表 | 通过     |

##### 1.3.1.2 存储从业务层获取的更新的酒店信息

| 触发条件             | 参数    | 预期结果                        | 测试结果 |
| -------------------- | ------- | ------------------------------- | -------- |
| 收到 updateHotelInfo 请求 | id, hotelLocation, bizRegion, hotelStar, description| 存储更新后的酒店信息到hotel表 | 通过     |

##### 1.3.1.3 存储用户正常入住后的订单状态

| 触发条件                | 参数   | 预期结果                             | 测试结果 |
| ----------------------- | ------ | ------------------------------------ | -------- |
| 收到 execOrder 请求 | orderid | 修改对应订单状态和用户信用 | 通过     |

##### 1.3.1.4 存储用户正常退房后的订单状态

| 触发条件               | 参数    | 预期结果                   | 测试结果 |
| ---------------------- | ------- | -------------------------- | -------- |
| 收到 checkout 请求 | orderid | 修改对应订单状态 | 通过     |

##### 1.3.1.5 存储用户逾期后的订单状态

| 触发条件                 | 参数 | 预期结果                       | 测试结果 |
| ------------------------ | ---- | ------------------------------ | -------- |
| 收到 overdue 请求 | orderid   | 修改对应订单状态 | 通过     |

##### 1.3.1.6 存储用户逾期入住后的订单状态

| 触发条件             | 参数 | 预期结果                   | 测试结果 |
| -------------------- | ---- | -------------------------- | -------- |
| 收到 recheck 请求 | orderid   | 修改对应订单状态 | 通过     |

##### 1.3.1.7 向业务层返回指定酒店的订单信息

| 触发条件                  | 参数         | 预期结果               | 测试结果 |
| ------------------------- | ------------ | ---------------------- | -------- |
| 收到 /{userId}/getHotelOrdersByStaffId 请求 | userid | 返回指定酒店的订单列表 | 通过     |

##### 1.3.1.8 向业务层返回指定酒店的优惠策略信息

| 触发条件                 | 参数 | 预期结果                   | 测试结果 |
| ------------------------ | ---- | -------------------------- | -------- |
| 收到 getHotelAllCoupon请求 | hotelId   | 返回数据库中指定酒店的优惠信息 | 通过     |

##### 1.3.1.9 存储从业务层获取的优惠策略的信息

| 触发条件                | 参数                             | 预期结果               | 测试结果 |
| ----------------------- | -------------------------------- | ---------------------- | -------- |
| 收到 addHotelTimeCoupon或者addHotelTargetMoneyCoupon请求 | CouponVO | 存储新增的优惠信息 | 通过     |

##### 1.3.1.10 存储从业务层获取的房间信息

| 触发条件                | 参数                             | 预期结果               | 测试结果 |
| ----------------------- | -------------------------------- | ---------------------- | -------- |
| 收到 updateRoomInfo 请求 | hotelId, roomType, rooms | 存储新增的房间信息 | 通过     |

## 2. 集成测试

### 2.1 功能测试

#### 2.1.1 查看酒店详情信息
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击酒店信息管理选项卡|无|显示酒店信息|通过|

#### 2.1.2 更新酒店信息
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击更新酒店按钮|无|更新酒店信息|通过|

#### 2.1.3 查看订单列表
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击订单管理选项卡|无|显示指定酒店所有订单|通过|

#### 2.1.4 入住
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击入住按钮|orderid|订单状态设为已入住|通过|

#### 2.1.5 退房
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击退房按钮|orderid|订单状态设为已完成或者待评价|通过|

#### 2.1.6 逾期异常
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击逾期按钮|orderid|订单状态设置为异常|通过|

#### 2.1.7 逾期入住
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击逾期入住按钮|orderid|订单状态设为已入住|通过|

#### 2.1.8 查看优惠策略
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击优惠策略管理|无|显示对应酒店所有优惠信息|通过|

#### 2.1.9 添加优惠策略
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击添加优惠策略按钮|策略信息|更新酒店策略|通过|

#### 2.1.10 录入房间
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击录入房间按钮|房间信息|更新酒店房间信息|通过|

