# 测试文档 - 网站营销人员相关

[TOC]

## 1. 单元测试

### 1.1 用户界面层单元测试

#### 1.1.1 页面显示与跳转测试
```
   - 酒店列表界面
      - 酒店详情界面
         - 生成订单模态框
   - 网站管理界面
      - 用户信用充值选项卡
      - 异常订单管理选项卡
      - 优惠策略管理选项卡
         - 优惠策略模态框

   测试结果：通过
```
#### 1.1.2 功能测试

##### 1.1.2.1 向业务层请求查看用户列表

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击信用充值选项卡|无|浏览器向服务器发起 /getAllClient GET请求|通过|

##### 1.1.2.2 信用充值

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击信用充值按钮|userId|浏览器向服务器发起 /rechargeCredit POST请求|通过|

##### 1.1.2.3 查看异常订单

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|选择异常订单管理选项卡|无|浏览器向服务器发起 /getAllOrders GET请求|通过|

##### 1.1.2.4 撤销异常订单

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击撤销该异常按钮|orderId|浏览器向服务器发起 /cancelAbnormalOrder POST请求|通过|

##### 1.1.2.5 查看优惠策略

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|选择优惠策略管理选项卡|-1|浏览器向服务器发起 /hotelAllCoupons GET请求 |通过|

##### 1.1.2.6 添加优惠策略

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|选择添加优惠按钮|-1|浏览器向服务器发起 /hotelTargetMoney或者/hotelTime POST请求|通过|

### 1.2 业务逻辑层单元测试

#### 1.2.1 功能测试

##### 1.2.1.1 向数据层请求查看用户列表
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /api/admin/getAllClient 请求|无|向数据层请求获得所有用户信息|通过|

##### 1.2.1.2 向数据层请求给用户信用值充值
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /api/account/rechargeCredit 请求|RechargeCreditVO|向数据层请求给用户信用充值|通过|

##### 1.2.1.3 向数据层请求查看订单
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /api/order/getAllOrders 请求|无|向数据层请求返回所有订单信息|通过|

##### 1.2.1.4 向数据层请求撤销异常订单并恢复用户信用
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|收到 /api/order/cancelAbnormalOrder 请求|CancelAbnormalOrderVO|向数据层请求恢复用户一定信用|通过|

##### 1.1.2.5 查看优惠策略

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|选择优惠策略管理选项卡|-1|浏览器向服务器发起 /hotelAllCoupons GET请求 |通过|

##### 1.1.2.6 添加优惠策略

|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|选择添加优惠按钮|-1|浏览器向服务器发起 /hotelTargetMoney或者/hotelTime POST请求|通过|

### 1.3 数据层单元测试

#### 1.3.1 功能测试

##### 1.3.1.1 向业务层返回所有用户信息

| 触发条件           | 参数  | 预期结果                  | 测试结果 |
| ------------------ | ----- | ------------------------- | -------- |
| 收到 getAllClients 请求 | 无 | 存储用户信息返回 | 通过     |

##### 1.3.1.2 存储从业务层获取的信用充值记录

| 触发条件             | 参数    | 预期结果                        | 测试结果 |
| -------------------- | ------- | ------------------------------- | -------- |
| 收到 rechargeUserCredit 请求 | userId | 存储更新后的信用信息 | 通过     |

##### 1.3.1.3 向业务层发送订单信息

| 触发条件                | 参数   | 预期结果                             | 测试结果 |
| ----------------------- | ------ | ------------------------------------ | -------- |
| 收到 getAllOrders 请求 | 无 | 返回数据库中订单信息的列表 | 通过     |

##### 1.3.1.4 存储从业务层获取的信用恢复信息

| 触发条件               | 参数    | 预期结果                   | 测试结果 |
| ---------------------- | ------- | -------------------------- | -------- |
| 收到 cancelAbnormalOrder 请求 | orderid，ratio | 存储更新后的信用信息 | 通过     |

##### 1.3.1.5 向业务层返回指定酒店的优惠策略信息

| 触发条件                 | 参数 | 预期结果                   | 测试结果 |
| ------------------------ | ---- | -------------------------- | -------- |
| 收到 getHotelAllCoupon请求 | -1   | 返回数据库中指定酒店的优惠信息 | 通过     |

##### 1.3.1.6 存储从业务层获取的优惠策略的信息

| 触发条件                | 参数                             | 预期结果               | 测试结果 |
| ----------------------- | -------------------------------- | ---------------------- | -------- |
| 收到 addHotelTimeCoupon或者addHotelTargetMoneyCoupon请求 | CouponVO | 存储新增的优惠信息 | 通过     |

## 2. 集成测试

### 2.1 功能测试

#### 2.1.1 查看用户列表
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|访问用户信用管理选项卡|无|显示用户列表|通过|

#### 2.1.2 信用充值
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击信用充值按钮后输入充值量|userId|更新充值后对信用|通过|

#### 2.1.3 查看异常订单
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击异常订单管理选项卡|无|显示所有异常订单|通过|

#### 2.1.4 撤销异常订单并恢复信用值
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击撤销该异常订单后并输入恢复比例|orderId|更新充值后对信用|通过|

#### 2.1.5 查看优惠策略
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击优惠策略管理|无|显示全局所有优惠信息|通过|

#### 2.1.6 添加优惠策略
|触发条件|参数|预期结果|测试结果|
|-|-|-|-|
|点击添加优惠策略按钮|策略信息|更新策略|通过|

